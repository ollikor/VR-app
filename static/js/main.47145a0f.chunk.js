(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,a){e.exports=a(65)},45:function(e,t,a){},46:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(19),i=a.n(s),o=(a(45),a(8)),l=a(9),c=a(11),u=a(10),m=a(12),h=(a(46),function(){return r.a.createElement("p",{className:"Header"},"Aseman junatiedot")}),p=a(7),f=a.n(p),d=a(14);function v(){return b.apply(this,arguments)}function b(){return(b=Object(d.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,"https://rata.digitraffic.fi/api/v1/metadata/stations",e.next=5,fetch("https://rata.digitraffic.fi/api/v1/metadata/stations").then(function(e){return e.json()}).then(function(e){return e.map(function(e){return t.push({station:e.stationName,code:e.stationShortCode})})});case 5:return e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function T(e){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,n="https://rata.digitraffic.fi/api/v1/live-trains/station/".concat(t,"?minutes_before_departure=30&minutes_after_departure=15&minutes_before_arrival=30&minutes_after_arrival=15"),e.next=5,fetch(n).then(function(e){return e.json()}).then(function(e){return e.map(function(e){return a.push(e)})});case 5:return e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}var g=a(69),y=a(71),E=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={searchText:"",stations:[],stationsCodes:[]},a.handleSearch=function(){var e=Object(d.a)(f.a.mark(function e(t){var n,r,s,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],r=t.target.value.charAt(0).toUpperCase()+t.target.value.slice(1),a.setState({searchText:r}),s=a.state.stationsCodes,r.length>0)for(i=0;i<s.length;i++)s[i].station.includes(r)&&(n.push(s[i]),a.setState({stations:n}));else a.setState({stations:[]});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.selectStation=function(){var e=Object(d.a)(f.a.mark(function e(t,n){var r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],a.setState({searchText:n}),e.next=4,T(t);case 4:return r=e.sent,e.next=7,a.props.result(r,t,a.state.stationsCodes);case 7:a.setState({stations:[]});case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,this.setState({stationsCodes:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Search"},r.a.createElement(g.a,null,r.a.createElement(g.a.Group,{className:"col col-sm-12 col-md-8 p-0 m-0"},r.a.createElement(g.a.Label,{className:"SearchTitle"},"Hae aseman nimell\xe4"),r.a.createElement(g.a.Control,{onFocus:function(e){return e.target.select()},list:"stations",size:"sm",type:"search",value:this.state.searchText,onChange:function(t){return e.handleSearch(t)}})),r.a.createElement(y.a,null,this.state.stations.map(function(t,a){return r.a.createElement(y.a.Item,{key:a,className:"col col-sm-12 col-md-8 p-2 m-0",onClick:function(){return e.selectStation(t.code,t.station)}},t.station)}))))}}]),t}(n.Component),S=a(70),j=a(68),O=a(67),C=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).cancelledStyle=function(e){return!0===e?{color:"#b3b3b3"}:{color:"#262626"}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"TabContent"},r.a.createElement(O.a,{borderless:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,this.props.titleOne),r.a.createElement("th",null,this.props.titleTwo),r.a.createElement("th",null,this.props.titleThree),r.a.createElement("th",null,this.props.titleFour))),r.a.createElement("tbody",null,this.props.result.length>0?this.props.result.map(function(t,a){return r.a.createElement("tr",{key:a,style:e.cancelledStyle(t.cancelled)},r.a.createElement("td",null,t.trainType+" "+t.trainNumber),r.a.createElement("td",null,t.departureStation),r.a.createElement("td",null,t.terminal),r.a.createElement("td",null,null!==t.lateTime?r.a.createElement("div",null,r.a.createElement("p",{className:"LatestTime"},t.lateTime),r.a.createElement("p",{className:"ScheduleTime"},"("+("0"+t.time.getHours()).slice(-2)+":"+("0"+t.time.getMinutes()).slice(-2)+")")):("0"+t.time.getHours()).slice(-2)+":"+("0"+t.time.getMinutes()).slice(-2),t.cancelled?r.a.createElement("p",{className:"Cancelled"},"Cancelled"):null))}):null)))}}]),t}(n.Component),R=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={key:"arrival",arrival:"Saapuvat",departure:"L\xe4htev\xe4t",train:"Juna",departureStation:"L\xe4ht\xf6asema",terminal:"P\xe4\xe4teasema",arrives:"Saapuu",goes:"L\xe4htee"},a.getArrivalTrains=function(){var e,t,n,r,s=a.props.result,i=[],o=a.props.code,l=a.props.stations;if(s.length>0){for(var c=0;c<s.length;c++)for(var u=0;u<s[c].timeTableRows.length;u++)if(s[c].timeTableRows[u].stationShortCode===o&&"ARRIVAL"===s[c].timeTableRows[u].type){var m=s[c].timeTableRows[u].scheduledTime,h=s[c].timeTableRows[u].actualTime,p=new Date(m),f=new Date(h),d=p.getTime(),v=f.getTime();r=p,n=Math.floor(d/6e4)-Math.floor(v/6e4)<0?("0"+f.getHours()).slice(-2)+":"+("0"+f.getMinutes()).slice(-2):null;for(var b=0;b<l.length;b++)s[c].timeTableRows[0].stationShortCode===l[b].code&&(e=l[b].station),s[c].timeTableRows[s[c].timeTableRows.length-1].stationShortCode===l[b].code&&(t=l[b].station);i.push({trainType:s[c].trainType,trainNumber:s[c].trainNumber,departureStation:e,terminal:t,cancelled:s[c].cancelled,time:r,lateTime:n})}return i.sort(function(e,t){return e.time-t.time}),i}return i},a.getDepartureTrains=function(){var e,t,n,r,s=a.props.result,i=[],o=a.props.code,l=a.props.stations;if(s.length>0){for(var c=0;c<s.length;c++){for(var u=0;u<s[c].timeTableRows.length;u++)if(s[c].timeTableRows[u].stationShortCode===o&&"DEPARTURE"===s[c].timeTableRows[u].type){var m=s[c].timeTableRows[u].scheduledTime,h=s[c].timeTableRows[u].actualTime,p=new Date(m),f=new Date(h),d=new Date(Date.now()).getTime(),v=p.getTime(),b=f.getTime(),T=Math.floor(v/6e4),w=Math.floor(b/6e4);if(r=p,d-v<0){n=T-w<0?("0"+f.getHours()).slice(-2)+":"+("0"+f.getMinutes()).slice(-2):null;for(var g=0;g<l.length;g++)s[c].timeTableRows[0].stationShortCode===l[g].code&&(e=l[g].station),s[c].timeTableRows[s[c].timeTableRows.length-1].stationShortCode===l[g].code&&(t=l[g].station);i.push({trainType:s[c].trainType,trainNumber:s[c].trainNumber,departureStation:e,terminal:t,cancelled:s[c].cancelled,time:r,lateTime:n})}}i.sort(function(e,t){return e.time-t.time})}return i}return i},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Results"},r.a.createElement(S.a,{id:"controlled-tab",defaultActiveKey:this.state.key,onSelect:function(t){return e.setState({key:t})}},r.a.createElement(j.a,{eventKey:"arrival",title:this.state.arrival},r.a.createElement(C,{titleOne:this.state.train,titleTwo:this.state.departureStation,titleThree:this.state.terminal,titleFour:this.state.arrives,result:this.getArrivalTrains()})),r.a.createElement(j.a,{eventKey:"departure",title:this.state.departure},r.a.createElement(C,{titleOne:this.state.train,titleTwo:this.state.departureStation,titleThree:this.state.terminal,titleFour:this.state.goes,result:this.getDepartureTrains()}))))}}]),t}(n.Component),k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={trains:[],code:"",stations:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col col-sm-12 col-md-6 p-0 App"},r.a.createElement("div",{className:"Container"},r.a.createElement(h,null),r.a.createElement(E,{result:function(t,a,n){return e.setState({trains:t,code:a,stations:n})}}),r.a.createElement(R,{result:this.state.trains,code:this.state.code,stations:this.state.stations})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(64);i.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.47145a0f.chunk.js.map